&gt; **&lt;font color="#000000" style="font-family: Fixedsys;font-size: 15px;"&gt;cfg_game_data 配置ShareNpc=1可以将QM和机器人的触发事件全部转到QF&lt;/font&gt;**

&gt; **&lt;font color="#000000" style="font-family: Fixedsys;font-size: 15px;"&gt;引擎触发是通用的,TXT的所有触发转换成小写后在LUA中就可使用,如说明书中缺省可反馈至对接群&lt;/font&gt;**

&gt; **&lt;font color="#000000" style="font-family: Fixedsys;font-size: 15px;"&gt;三端引擎的触发主体只会是系统/玩家对象;如cfg_mongen表填入的触发回调,参数1是系统对象,参数2才是怪物对象&lt;/font&gt;**

| 引擎事件(QM)   | 说明                       |
| :------------- | -------------------------- |
| `startup`      | 服务端启动触发             |
| `login`        | 玩家登录触发               |
| `ontimer(X)`   | 个人定时器触发(X=触发器ID) |
| `ontimerex(X)` | 全局定时器触发(X=触发器ID) |
| `loadguild`    | 初始化行会触发             |

| 引擎事件(QF)           | 说明                                                                  |
| :--------------------- | --------------------------------------------------------------------- |
| `triggerchat`          | 聊天内容聊天触发                                                      |
| `privatechat`          | 收到私聊信息触发                                                      |
| `recharge`             | 充值触发                                                              |
| `clicknpc`             | 点击npc触发                                                           |
| `changemoneyout`       | 当货币超出21亿时触发[引擎23.08.30拓展为超出42亿时触发]                |
| `resetday`             | 跨天登录触发<br />[0点在线的玩家也会进入触发]                           |
| `setday`               | 每天登录触发                                                          |
| `setscreen`            | 修改分辨率触发                                                        |
| `closedbagitemclick`   | 点击背包未开启格子锁头触发                                            |
| `beginteleport`        | 传送戒指传送前触发                                                    |
| `addfriendrequest`     | 加好友前触发                                                          |
| `lookhuminfo`          | 查看别人装备触发                                                      |
| `addbagbefore`         | 物品进包前触发[无法阻止进包操作]                                      |
| `addbag`               | 物品进入背包触发                                                      |
| `addherobag`           | 进入英雄背包触发                                                      |
| `run`                  | 跑步触发                                                              |
| `walk`                 | 走路触发                                                              |
| `entermap`             | 人物切换地图触发                                                      |
| `leavemap`             | 人物离开地图触发                                                      |
| `heroentermap`         | 英雄切换地图触发                                                      |
| `playoffline`          | 人物大退触发                                                          |
| `playreconnection`     | 人物小退触发                                                          |
| `playlevelup`          | 人物升级触发                                                          |
| `herolevelup`          | 英雄升级触发                                                          |
| `slaveupgrade`         | 宝宝升级触发                                                          |
| `sendability`          | 人物属性改变时触发                                                    |
| `getexp`               | 人物获取经验触发                                                      |
| `itemexpired`          | 装备到期触发/过期触发                                                 |
| `heroitemexpired`      | 英雄装备到期触发/过期触发                                             |
| `itemdamage(X)`        | 装备持久消失触发(X=装备位置)                                          |
| `dropuseitems(X)`      | 参照装备投保已投保装备掉落触发(X=装备位置)                            |
| `makeweaponunluck`     | 武器诅咒前触发                                                        |
| `killplay`             | 杀死人物触发                                                          |
| `killmon`              | 杀死怪物触发                                                          |
| `onkillmob`            | 杀死怪物触发(需要在mapinfo地图参数增加onkillmon)                      |
| `scatterbagitems`      | 击杀目标爆物品触发                                                    |
| `startautoplaygame`    | 开始挂机触发                                                          |
| `stopautoplaygame`     | 停止挂机触发                                                          |
| `startmyshop`          | 摆摊触发                                                              |
| `startmyshopok`        | 摆摊成功触发                                                          |
| `bindwechat`           | 公众号获取key成功触发                                                 |
| `bindrewechat`         | 公众号成功验证触发                                                    |
| `bagusestoneitemok`    | 镶嵌宝石触发                                                          |
| `removestoneitem`      | 卸下宝石触发                                                          |
| `openbottomui`         | 展开聊天框时触发                                                      |
| `closebottomui`        | 隐藏聊天框时触发                                                      |
| `readmail`             | 邮件id阅读邮件触发                                                    |
| `getmailitem`          | 邮件id提取邮件触发                                                    |
| `opensndaitembox`      | 人物开启首饰盒触发(神佑/生肖)                                         |
| `heroopensndaitembox`  | 英雄开启首饰盒触发(神佑/生肖)                                         |
| `stdmodefunc(X)`       | 双击类道具触发(X=道具表anicount值,支持道具表stdmode[2、31、200` ] 类) |
| `beforeeatitem`        | 双击使用道具前触发                                                    |
| `getboxsitem(X)`       | 宝箱获得物品时触发 (X=道具表shape值)                                  |
| `canreopenbox(X)`      | 宝箱开启前触发 (X=道具表shape值)                                      |
| `moneychange(X)`       | 货币改变触发 (X=货币道具表idx)                                        |
| `userbuyitem`          | 系统npc商店购买前触发复古npc店铺,非商城与摆摊                         |
| `canbuyshopitem(X)`    | 商城购买前触发(X=商城表cfg_store的requestID字段)                      |
| `canshowshopitem(X)`   | 商城显示触发(X=商城表cfg_store的condisId字段)                         |
| `buyshopitem`          | 商城购买后触发                                                        |
| `groupitemoffex`       | 脱套装触发                                                            |
| `groupitemonex`        | 穿套装触发                                                            |
| `groupitemon(X)`       | 套装激活触发(X=套装编号,参照套装配置说明)                             |
| `takeonex`             | 人物穿戴任意装备触发                                                  |
| `takeoffex`            | 人物脱下任意装备触发                                                  |
| `takeonbefore(X)`      | 穿戴装备前触发(X=装备位置)                                            |
| `takeoffbefore(X)`     | 脱下装备前触发(X=装备位置)                                            |
| `takeonbeforee(X)`     | 穿戴任意装备前触发                                                    |
| `takeon(X)`            | 穿戴装备时触发(X=装备位置)                                            |
| `takeoff(X)`           | 脱下装备时触发(X=装备位置)                                            |
| `takeoffexchange`      | 脱下装备进入背包前触发                                                |
| `herologin`            | 召唤英雄触发                                                          |
| `heroluck`             | 英雄忠诚度改变触发                                                    |
| `herotakeonex`         | 英雄穿戴任意装备触发                                                  |
| `herotakeoffex`        | 英雄脱下任意装备触发                                                  |
| `herotakeonbefore(X)`  | 英雄穿戴装备前触发(X=装备位置)                                        |
| `herotakeoffbefore(X)` | 英雄脱下装备前触发(X=装备位置)                                        |
| `herotakeon(X)`        | 英雄穿戴装备触发(X=装备位置)                                          |
| `herotakeoff(X)`       | 英雄脱下装备触发(X=装备位置)                                          |
| `herotakeoffexchange`  | 英雄脱下任意装备前触发                                                |
| `dealend`              | 交易后触发                                                            |
| `dealbefore`           | 交易前触发                                                            |
| `checkbuildguild`      | 创建行会前触发                                                        |
| `inivitguild`          | 邀请入会前触发                                                        |
| `guildaddmember`       | 加入行会前触发                                                        |
| `guildaddmemberafter`  | 加入行会后触发                                                        |
| `guilddelmemberbefore` | 退出行会前触发                                                        |
| `guilddelmember`       | 退出行会触发                                                          |
| `updateguildnotice`    | 编辑行会公告前触发                                                    |
| `setrankname(X)`       | 行会编辑封号前触发（X=1-5个行会封号）                                 |
| `guildchiefdelmember`  | 掌门踢出行会成员前触发                                                |
| `guildclosebefore`     | 解散行会前触发                                                        |
| `guildclose`           | 解散行会前触发                                                        |
| `guildapplybefore`     | 请求行会联盟前触发                                                    |
| `setguildrank1`        | 任命掌门人前触发                                                      |
| `setguildrank2`        | 任命副掌门前触发                                                      |
| `setguildrank3`        | 任命成员3前触发                                                       |
| `setguildrank4`        | 任命成员4前触发                                                       |
| `setguildrank5`        | 任命成员5前触发                                                       |
| `carpathend`           | 镖车到达指定位置触发(配置详情参照押镖系统说明)                        |
| `leavedart`            | 镖车切换地图触发(配置详情参照押镖系统说明)                            |
| `carfindmaster`        | 镖车进入自动寻路范围触发(配置详情参照押镖系统说明)                    |
| `slavedamage`          | 镖车被攻击触发(配置详情参照押镖系统说明)                              |
| `hitslave`             | 攻击别人镖车触发(配置详情参照押镖系统说明)                            |
| `kuafuend`             | 跨服结束触发(参照跨服系统说明)                                        |
| `kflogin`              | 跨服成功触发(参照跨服系统说明)                                        |
| `kfsynvar(X)`          | 同步跨服变量触发(X=回调id,参照跨服系统说明)                           |
| `reboxtile`            | 盒子断线重连触发                                                      |
| `giftstatusok`         | 盒子礼包领取成功触发                                                  |
| `giftstatusfail`       | 盒子礼包领取失败触发                                                  |
| `invitegroup`          | 邀请组队前qf触发                                                      |
| `groupcreate`          | 创建队伍时触发(组队)                                                  |
| `startgroup`           | 创建队伍前触发(组队)                                                  |
| `leavegroup`           | 离开队伍时触发(退组)                                                  |
| `groupdelmember`       | 删除组队成员触发                                                      |
| `groupaddmember`       | 添加组队成员触发                                                      |
| `groupkillmon`         | 组队杀怪触发                                                          |
| `getgroupcount`        | 获取组队成员人数                                                      |
| `showfashion`          | 人物勾选外显时装生效触发                                              |
| `heroshowfashion`      | 英雄勾选外显时装生效触发                                              |
| `notshowfashion`       | 人物取消外显时装时候触发                                              |
| `heronotshowfashion`   | 英雄取消外显时装时候触发                                              |
| `pickupitem(X)`        | 玩家捡取物品后触发(X=物品idx)                                         |
| `pickupitemex`         | 玩家捡取任意物品后触发                                                |
| `pickupitemfront(X)`   | 玩家捡取物品前触发(X=物品idx)                                         |
| `pickupitemfrontex`    | 玩家捡取任意物品前触发                                                |
| `dropitem(X)`          | 玩家仍掉物品后触发(X=物品idx)                                         |
| `dropitemex`           | 玩家仍掉任意物品后触发                                                |
| `dropitemfront(X)`     | 玩家仍掉物品前触发(X=物品idx)                                         |
| `dropitemfrontex`      | 玩家仍掉任意物品前触发                                                |
| `herodropitem(X)`      | 英雄扔掉指定物品后触发(X=物品idx)                                     |
| `herodropitemex`       | 英雄扔掉任意物品后触发                                                |
| `herodropitemfront(X)` | 英雄扔掉指定物品前触发(X=物品idx)                                     |
| `herodropitemfrontex`  | 英雄扔掉任意物品前触发                                                |
| `picktask`             | 接取任务系统(参照任务系统)                                            |
| `clicknewtask`         | 点击任务触发(参照任务系统)                                            |
| `changetask`           | 刷新任务触发(参照任务系统)                                            |
| `completetask`         | 完成任务触发(参照任务系统)                                            |
| `deletetask`           | 删除任务触发(参照任务系统)                                            |
| `nextdie`              | 人物复活前触发                                                        |
| `revival`              | 人物复活时触发                                                        |
| `playdie`              | 人物死亡触发                                                          |
| `herodie`              | 英雄死亡触发                                                          |
| `selfkillslave`        | 宝宝死亡触发                                                          |
| `checkdropuseitems`    | 人物死亡装备掉落前触发                                                |
| `heronextdie`          | 英雄死亡之前复活触发                                                  |
| `cangetbackpaimaiitem` | 拍卖行下架、禁止架下触发(参照拍卖行系统)                              |
| `canpaimaiitem`        | 拍卖行上架、禁止上架触发(参照拍卖行系统)                              |
| `buypaimaiitem`        | 拍卖行购买时触发                                                      |
| `biddingpaimaiitem`    | 拍卖行竞价触发                                                        |
| `crittrigger`          | 暴击触发                                                              |
| `reboundhurt`          | 伤害反弹触发                                                          |
| `attackdamage`         | 人物攻击前触发                                                        |
| `heroattackdamage`     | 英雄攻击前触发                                                        |
| `attackdamagebb`       | 宝宝攻击前触发                                                        |
| `heroattackdamagebb`   | 英雄宝宝攻击前触发                                                    |
| `attack`               | 人物物理平砍攻击触发                                                  |
| `magicattack`          | 人物魔法攻击触发                                                      |
| `heroattack`           | 英雄物理攻击触发                                                      |
| `heromagicattack`      | 英雄魔法攻击触发                                                      |
| `magicattackpet`       | 宝宝魔法攻击触发                                                      |
| `heroattackpet`        | 英雄宝宝物理攻击触发                                                  |
| `heromagicattackpet`   | 英雄宝宝魔法攻击触发                                                  |
| `struckdamage`         | 人物被攻击前触发                                                      |
| `herostruckdamage`     | 英雄被攻击前触发                                                      |
| `struckdamagebb`       | 宝宝被攻击前触发                                                      |
| `herostruckdamagebb`   | 英雄宝宝被攻击前触发                                                  |
| `struck`               | 人物被物理攻击触发                                                    |
| `magicstruck`          | 人物被魔法攻击触发                                                    |
| `herostruck`           | 英雄被物理攻击触发                                                    |
| `heromagicstruck`      | 英雄被魔法攻击触发                                                    |
| `struckpet`            | 宝宝被物理攻击触发                                                    |
| `magicstruckpet`       | 宝宝被魔法攻击触发                                                    |
| `herostruckpet`        | 英雄宝宝被物理攻击触发                                                |
| `heromagicstruckpet`   | 英雄宝宝被魔法攻击触发                                                |
| `beginmagic`           | 使用技能前触发                                                        |
| `magselffunc(X)`       | 自身使用技能触发(X=技能ID)                                            |
| `magtagfunc(X)`        | 对目标人物使用技能时触发(X=技能ID)                                    |
| `magmonfunc(X)`        | 对目标怪物使用技能时触发(X=技能ID)                                    |
| `magtagfuncex(X)`      | 释放技能触发传递参数(X=技能ID)                                        |
| `mobtreachery`         | 宝宝叛变触发                                                          |
| `heromobtreachery`     | 英雄宝宝叛变触发                                                      |
| `slavebb`              | 获得宝宝触发                                                          |
| `heroslavebb`          | 英雄获得宝宝触发                                                      |
| `buffchange`           | buff操作触发                                                          |
| `herobuffchange`       | 英雄buff操作触发                                                      |
| `mirrormapend`         | 镜像地图销毁前触发                                                    |
| `beforeroute`          | 进入连接点(跳转点)前触                                                |
| `canpush`              | 推动技能(野蛮冲撞/抗拒火环/气波功/自定义推动技能)施法前触发           |
| `custommagicdamage(X)` | 自定义技能处理伤害前触发                                              |
| `titlechangedex`       | 人物称号改变触发                                                      |
| `untitledex`           | 人物称号取消触发                                                      |
| `titlechanged_(X)`     | 人物改变称号时触发 (X=装备表shape值)                                  |
| `herotitlechanged_(X)` | 英雄改变称号时触发 (X=装备表shape值)                                  |
| `untitled_(X)`         | 人物取消称号时触发 (X=装备表shape值)                                  |
| `herountitled_(X)`     | 英雄取消称号时触发 (X=装备表shape值)                                  |
| `collectmonex`         | 采集前触发                                                            |
| `collectmon(X)`        | 玩家点击采集怪物将会触发(X=怪物ID)                                    |
| `collectmonfail(X)`    | 超过采集范围触发(X=怪物ID)                                            |
| `qfloadbegin`          | QFunction-0重载前触发                                                 |
| `qfloadend`            | QFunction-0重载后触发                                                 |
| `inisort`              | 自定义排行榜刷新触发                                                  |
| `clicksortbutton`      | 自定义排行榜切换玩家和英雄的页签触发                                  |
| `clicksortno`          | 自定义排行榜点击排名触发                                              |
| `findpathbegin`        | 寻路开启                                                              |
| `findpathstop`         | 寻路中断                                                              |
| `findpathend`          | 寻路结束                                                              |
| `dropgoldfront`        | 丢弃金币前触发                                                        |