

## 引擎系统变量

| 变量 | 类型           | 说明                                                                |
| :--- | :------------- | :------------------------------------------------------------------ |
| `A`  | 字符型系统变量 | 重启服务器保存.500个(A0 - A499)  存放在Mir200/GlobalVal.ini文件里面 |
| `G`  | 数字型系统变量 | 重启服务器保存.500个(G0 - G499)  存放在Mir200/GlobalVal.ini文件里面 |
| `I`  | 数字型系统变量 | 重启服务器不保存.100个(I0 - I99)                                    |

### 获取系统变量

`getsysvar`

| 参数    | 类型               | 空   | 默认 | 注释   |
| :------ | :----------------- | :--- | :--- | :----- |
| varName | `string`           | 否   |      | 变量名 |
| result  | `string`/`integer` |      |      | 变量值 |

### 设置系统变量

`setsysvar`

| 参数    | 类型               | 空   | 默认 | 注释   |
| :------ | :----------------- | :--- | :--- | :----- |
| varName | `string`           | 否   |      | 变量名 |
| value   | `string`/`integer` |      |      | 变量值 |

```lua
    --系统变量示例
    setsysvar("A1","996abc")
    say(actor, "系统字符变量A1变量="..getsysvar("A1"))

    setsysvar("G2",996)
    say(actor, "系统数字变量G2变量="..getsysvar("G2"))

    setsysvar("I3",666)
    say(actor, "系统数字变量I3变量="..getsysvar("I3"))
```

------------

## 引擎玩家变量

| 变量       | 类型           | 说明                                                                                          |
| :--------- | :------------- | :-------------------------------------------------------------------------------------------- |
| `S`        | 字符型个人变量 | 下线不保存.100个(S0 - S99)                                                                    |
| `P`        | 数字型个人变量 | 仅在当前NPC有效.当Close对话时.所有P变量归零.100个(P0 - P99)                                   |
| `D`        | 数字型个人变量 | 下线不保存.100个(D0 - D99)摇骰子变量                                                          |
| `N`        | 数字型个人变量 | 下线不保存.100个(N0 - N99)                                                                    |
| `M`        | 数字型个人变量 | 下线不保存.100个(M0 - M99)切换地图清空                                                        |
| `U`        | 数字型个人变量 | 可保存.255个(U0 - U254)（存放在SQL角色数据库）最大值21亿                                      |
| `T`        | 字符型个人变量 | 可保存.255个(T0 - T254)（存放在SQL角色数据库）最大长度8000字符串以内                          |
| `J`        | 数字型个人变量 | 可保存.每晚自动12点重置,合区或关停服务器请错开00:00点.500个(J0 - J499)（存放在SQL角色数据库） |
| `Z`        | 字符型个人变量 | 可保存.每晚自动12点重置,合区或关停服务器请错开00:00点.500个(Z0 - Z499)（存放在SQL角色数据库） |
| `B`        | 数字型个人变量 | 可保存.最高支持19位数,适用大数值操作.100个(B0 - B99)（存放在SQL角色数据库）                   |
| `个人标记` | 整数型个人变量 | 可保存,该变量只有0和1的两种状态                                                               |

### 获取玩家变量

`getplaydef`

| 参数    | 类型               | 空   | 默认 | 注释     |
| :------ | :----------------- | :--- | :--- | :------- |
| actor   | `object`           | 否   |      | 玩家对象 |
| varName | `string`           | 否   |      | 变量名   |
| result  | `string`/`integer` |      |      | 变量值   |

### 设置玩家变量

`setplaydef`

| 参数    | 类型               | 空   | 默认 | 注释     |
| :------ | :----------------- | :--- | :--- | :------- |
| actor   | `object`           | 否   |      | 玩家对象 |
| varName | `string`           | 否   |      | 变量名   |
| value   | `string`/`integer` |      |      | 变量值   |

> **支持自定义临时变量**
 格式：1.自定义数字变量，以`N$`为头标志；
 2.自定义字符变量，以`S$`为头标志
 
```lua
  --玩家变量示例
    setplaydef(actor, "U1",1)
    say(actor, "玩家数字变量U1变量="..getplaydef(actor,"U1"))

  --临时玩家变量示例
    setplaydef(actor, "N$变量1",1)
    say(actor, "自定义数字变量N$变量1="..getplaydef(actor,"N$变量1"))
```

```lua
    [[lua获取TXT命令设置的高效率版键值对,仅作参考,可根据自身需求修改]]
    function getVarCache(actor,varName,key)
        local str = getplaydef(actor,varName)
        local result = {}
        for k, v in string.gmatch(str, "([^=]+)=([^,]+)") do
            k = k:gsub(",", "")
            result[k] = v
        end
        return result[tostring(key)] or ""
    end

    local value = getVarCache(actor,"T1",1)
```

### 获取人物标记/标识值

`getflagstatus`

| 参数   | 类型      | 空   | 默认 | 注释          |
| :----- | :-------- | :--- | :--- | :------------ |
| play   | `object`  | 否   |      | 玩家对象      |
| nIndex | `integer` | 否   |      | 索引（1-800） |
| result | `integer` | 否   |      | 对应属性值    |

### 设置人物标记/标识值

`setflagstatus`

| 参数   | 类型      | 空   | 默认 | 注释          |
| :----- | :-------- | :--- | :--- | :------------ |
| play   | `object`  | 否   |      | 玩家对象      |
| nIndex | `integer` | 否   |      | 索引（1-800） |
| nvalue | `integer` | 否   |      | 对应属性值(0/1)    |